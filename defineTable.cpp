#include <iostream>

#include "input.h"
#include "defineTable.h"


unsigned short bitTable[8] = {0, 0x80, 0xc0, 0xe0, 0xf0, 0xf8, 0xfc, 0xfe};
unsigned char valueToKey[256];
void initTables()
{
	valueToKey[127] = 0;
	valueToKey[63] = 1;
	valueToKey[31] = 2;
	valueToKey[15] = 3;
	valueToKey[7] = 4;
	valueToKey[3] = 5;
	valueToKey[1] = 6;
	valueToKey[0] = 7;
	valueToKey[255] = 8;
	valueToKey[254] = 9;
	valueToKey[252] = 10;
	valueToKey[248] = 11;
	valueToKey[240] = 12;
	valueToKey[224] = 13;
	valueToKey[192] = 14;
	valueToKey[128] = 15;
	valueToKey[64] = 16;
	valueToKey[32] = 17;
	valueToKey[16] = 18;
	valueToKey[8] = 19;
	valueToKey[4] = 20;
	valueToKey[2] = 21;
	valueToKey[96] = 22;
	valueToKey[48] = 23;
	valueToKey[24] = 24;
	valueToKey[12] = 25;
	valueToKey[6] = 26;
	valueToKey[112] = 27;
	valueToKey[56] = 28;
	valueToKey[28] = 29;
	valueToKey[14] = 30;
	valueToKey[120] = 31;
	valueToKey[60] = 32;
	valueToKey[30] = 33;
	valueToKey[126] = 34;
	valueToKey[124] = 35;
	valueToKey[62] = 36;
}
/*
unsigned char shiftMap[36][8] = {
64, 32, 16, 8, 4, 2, 1, 0,
32, 16, 8, 4, 2, 1, 0, 0,
16, 8, 4, 2, 1, 0, 0, 0,
8, 4, 2, 1, 0, 0, 0, 0,
4, 2, 1, 0, 0, 0, 0, 0,
2, 1, 0, 0, 0, 0, 0, 0,
1, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0, 0,
96, 48, 24, 12, 6, 3, 1, 0,
48, 24, 12, 6, 3, 1, 0, 0,
24, 12, 6, 3, 1, 0, 0, 0,
12, 6, 3, 1, 0, 0, 0, 0,
6, 3, 1, 0, 0, 0, 0, 0,
3, 1, 0, 0, 0, 0, 0, 0,
1, 0, 0, 0, 0, 0, 0, 0,
112, 56, 28, 14, 7, 3, 1, 0,
56, 28, 14, 7, 3, 1, 0, 0,
28, 14, 7, 3, 1, 0, 0, 0,
14, 7, 3, 1, 0, 0, 0, 0,
7, 3, 1, 0, 0, 0, 0, 0,
3, 1, 0, 0, 0, 0, 0, 0,
120, 60, 30, 15, 7, 3, 1, 0,
60, 30, 15, 7, 3, 1, 0, 0,
30, 15, 7, 3, 1, 0, 0, 0,
15, 7, 3, 1, 0, 0, 0, 0,
7, 3, 1, 0, 0, 0, 0, 0,
124, 62, 31, 15, 7, 3, 1, 0,
62, 31, 15, 7, 3, 1, 0, 0,
31, 15, 7, 3, 1, 0, 0, 0,
15, 7, 3, 1, 0, 0, 0, 0,
126, 63, 31, 15, 7, 3, 1, 0,
63, 31, 15, 7, 3, 1, 0, 0,
31, 15, 7, 3, 1, 0, 0, 0,
127, 63, 31, 15, 7, 3, 1, 0,
63, 31, 15, 7, 3, 1, 0, 0,
127, 63, 31, 15, 7, 3, 1, 0	};
*/

/*
 * usage: shiftMap8bit[valueToKey[x]][valueToKey[y]-7][z]
 * value returned: [x] [y] [0x00] [0x00] >> z+1
 */
unsigned int shiftMap8bit[8][9][8] = {
1065353216, 532676608, 266338304, 133169152, 66584576, 33292288, 16646144, 8323072, 
1073709056, 536854528, 268427264, 134213632, 67106816, 33553408, 16776704, 8388352, 
1073676288, 536838144, 268419072, 134209536, 67104768, 33552384, 16776192, 8388096, 
1073610752, 536805376, 268402688, 134201344, 67100672, 33550336, 16775168, 8387584, 
1073479680, 536739840, 268369920, 134184960, 67092480, 33546240, 16773120, 8386560, 
1073217536, 536608768, 268304384, 134152192, 67076096, 33538048, 16769024, 8384512, 
1072693248, 536346624, 268173312, 134086656, 67043328, 33521664, 16760832, 8380416, 
1071644672, 535822336, 267911168, 133955584, 66977792, 33488896, 16744448, 8372224, 
1069547520, 534773760, 267386880, 133693440, 66846720, 33423360, 16711680, 8355840, 

528482304, 264241152, 132120576, 66060288, 33030144, 16515072, 8257536, 4128768, 
536838144, 268419072, 134209536, 67104768, 33552384, 16776192, 8388096, 4194048, 
536805376, 268402688, 134201344, 67100672, 33550336, 16775168, 8387584, 4193792, 
536739840, 268369920, 134184960, 67092480, 33546240, 16773120, 8386560, 4193280, 
536608768, 268304384, 134152192, 67076096, 33538048, 16769024, 8384512, 4192256, 
536346624, 268173312, 134086656, 67043328, 33521664, 16760832, 8380416, 4190208, 
535822336, 267911168, 133955584, 66977792, 33488896, 16744448, 8372224, 4186112, 
534773760, 267386880, 133693440, 66846720, 33423360, 16711680, 8355840, 4177920, 
532676608, 266338304, 133169152, 66584576, 33292288, 16646144, 8323072, 4161536, 

260046848, 130023424, 65011712, 32505856, 16252928, 8126464, 4063232, 2031616, 
268402688, 134201344, 67100672, 33550336, 16775168, 8387584, 4193792, 2096896, 
268369920, 134184960, 67092480, 33546240, 16773120, 8386560, 4193280, 2096640, 
268304384, 134152192, 67076096, 33538048, 16769024, 8384512, 4192256, 2096128, 
268173312, 134086656, 67043328, 33521664, 16760832, 8380416, 4190208, 2095104, 
267911168, 133955584, 66977792, 33488896, 16744448, 8372224, 4186112, 2093056, 
267386880, 133693440, 66846720, 33423360, 16711680, 8355840, 4177920, 2088960, 
266338304, 133169152, 66584576, 33292288, 16646144, 8323072, 4161536, 2080768, 
264241152, 132120576, 66060288, 33030144, 16515072, 8257536, 4128768, 2064384, 

125829120, 62914560, 31457280, 15728640, 7864320, 3932160, 1966080, 983040, 
134184960, 67092480, 33546240, 16773120, 8386560, 4193280, 2096640, 1048320, 
134152192, 67076096, 33538048, 16769024, 8384512, 4192256, 2096128, 1048064, 
134086656, 67043328, 33521664, 16760832, 8380416, 4190208, 2095104, 1047552, 
133955584, 66977792, 33488896, 16744448, 8372224, 4186112, 2093056, 1046528, 
133693440, 66846720, 33423360, 16711680, 8355840, 4177920, 2088960, 1044480, 
133169152, 66584576, 33292288, 16646144, 8323072, 4161536, 2080768, 1040384, 
132120576, 66060288, 33030144, 16515072, 8257536, 4128768, 2064384, 1032192, 
130023424, 65011712, 32505856, 16252928, 8126464, 4063232, 2031616, 1015808, 

58720256, 29360128, 14680064, 7340032, 3670016, 1835008, 917504, 458752, 
67076096, 33538048, 16769024, 8384512, 4192256, 2096128, 1048064, 524032, 
67043328, 33521664, 16760832, 8380416, 4190208, 2095104, 1047552, 523776, 
66977792, 33488896, 16744448, 8372224, 4186112, 2093056, 1046528, 523264, 
66846720, 33423360, 16711680, 8355840, 4177920, 2088960, 1044480, 522240, 
66584576, 33292288, 16646144, 8323072, 4161536, 2080768, 1040384, 520192, 
66060288, 33030144, 16515072, 8257536, 4128768, 2064384, 1032192, 516096, 
65011712, 32505856, 16252928, 8126464, 4063232, 2031616, 1015808, 507904, 
62914560, 31457280, 15728640, 7864320, 3932160, 1966080, 983040, 491520, 

25165824, 12582912, 6291456, 3145728, 1572864, 786432, 393216, 196608, 
33521664, 16760832, 8380416, 4190208, 2095104, 1047552, 523776, 261888, 
33488896, 16744448, 8372224, 4186112, 2093056, 1046528, 523264, 261632, 
33423360, 16711680, 8355840, 4177920, 2088960, 1044480, 522240, 261120, 
33292288, 16646144, 8323072, 4161536, 2080768, 1040384, 520192, 260096, 
33030144, 16515072, 8257536, 4128768, 2064384, 1032192, 516096, 258048, 
32505856, 16252928, 8126464, 4063232, 2031616, 1015808, 507904, 253952, 
31457280, 15728640, 7864320, 3932160, 1966080, 983040, 491520, 245760, 
29360128, 14680064, 7340032, 3670016, 1835008, 917504, 458752, 229376, 

8388608, 4194304, 2097152, 1048576, 524288, 262144, 131072, 65536, 
16744448, 8372224, 4186112, 2093056, 1046528, 523264, 261632, 130816, 
16711680, 8355840, 4177920, 2088960, 1044480, 522240, 261120, 130560, 
16646144, 8323072, 4161536, 2080768, 1040384, 520192, 260096, 130048, 
16515072, 8257536, 4128768, 2064384, 1032192, 516096, 258048, 129024, 
16252928, 8126464, 4063232, 2031616, 1015808, 507904, 253952, 126976, 
15728640, 7864320, 3932160, 1966080, 983040, 491520, 245760, 122880, 
14680064, 7340032, 3670016, 1835008, 917504, 458752, 229376, 114688, 
12582912, 6291456, 3145728, 1572864, 786432, 393216, 196608, 98304, 

2139095040, 1069547520, 534773760, 267386880, 133693440, 66846720, 33423360, 16711680, 
2147450880, 1073725440, 536862720, 268431360, 134215680, 67107840, 33553920, 16776960, 
2147418112, 1073709056, 536854528, 268427264, 134213632, 67106816, 33553408, 16776704, 
2147352576, 1073676288, 536838144, 268419072, 134209536, 67104768, 33552384, 16776192, 
2147221504, 1073610752, 536805376, 268402688, 134201344, 67100672, 33550336, 16775168, 
2146959360, 1073479680, 536739840, 268369920, 134184960, 67092480, 33546240, 16773120, 
2146435072, 1073217536, 536608768, 268304384, 134152192, 67076096, 33538048, 16769024, 
2145386496, 1072693248, 536346624, 268173312, 134086656, 67043328, 33521664, 16760832, 
2143289344, 1071644672, 535822336, 267911168, 133955584, 66977792, 33488896, 16744448, 
};
/*
 * usage: shiftMapByte[valueToKey[x]][valueToKey[y]-8][z]
 * value returned: [x] [0xff] [y] [0x00] >> z+1
 */
unsigned int shiftMapByte[8][8][8] = {
1073741696, 536870848, 268435424, 134217712, 67108856, 33554428, 16777214, 8388607, 
1073741568, 536870784, 268435392, 134217696, 67108848, 33554424, 16777212, 8388606, 
1073741312, 536870656, 268435328, 134217664, 67108832, 33554416, 16777208, 8388604, 
1073740800, 536870400, 268435200, 134217600, 67108800, 33554400, 16777200, 8388600, 
1073739776, 536869888, 268434944, 134217472, 67108736, 33554368, 16777184, 8388592, 
1073737728, 536868864, 268434432, 134217216, 67108608, 33554304, 16777152, 8388576, 
1073733632, 536866816, 268433408, 134216704, 67108352, 33554176, 16777088, 8388544, 
1073725440, 536862720, 268431360, 134215680, 67107840, 33553920, 16776960, 8388480, 

536870784, 268435392, 134217696, 67108848, 33554424, 16777212, 8388606, 4194303, 
536870656, 268435328, 134217664, 67108832, 33554416, 16777208, 8388604, 4194302, 
536870400, 268435200, 134217600, 67108800, 33554400, 16777200, 8388600, 4194300, 
536869888, 268434944, 134217472, 67108736, 33554368, 16777184, 8388592, 4194296, 
536868864, 268434432, 134217216, 67108608, 33554304, 16777152, 8388576, 4194288, 
536866816, 268433408, 134216704, 67108352, 33554176, 16777088, 8388544, 4194272, 
536862720, 268431360, 134215680, 67107840, 33553920, 16776960, 8388480, 4194240, 
536854528, 268427264, 134213632, 67106816, 33553408, 16776704, 8388352, 4194176, 

268435328, 134217664, 67108832, 33554416, 16777208, 8388604, 4194302, 2097151, 
268435200, 134217600, 67108800, 33554400, 16777200, 8388600, 4194300, 2097150, 
268434944, 134217472, 67108736, 33554368, 16777184, 8388592, 4194296, 2097148, 
268434432, 134217216, 67108608, 33554304, 16777152, 8388576, 4194288, 2097144, 
268433408, 134216704, 67108352, 33554176, 16777088, 8388544, 4194272, 2097136, 
268431360, 134215680, 67107840, 33553920, 16776960, 8388480, 4194240, 2097120, 
268427264, 134213632, 67106816, 33553408, 16776704, 8388352, 4194176, 2097088, 
268419072, 134209536, 67104768, 33552384, 16776192, 8388096, 4194048, 2097024, 

134217600, 67108800, 33554400, 16777200, 8388600, 4194300, 2097150, 1048575, 
134217472, 67108736, 33554368, 16777184, 8388592, 4194296, 2097148, 1048574, 
134217216, 67108608, 33554304, 16777152, 8388576, 4194288, 2097144, 1048572, 
134216704, 67108352, 33554176, 16777088, 8388544, 4194272, 2097136, 1048568, 
134215680, 67107840, 33553920, 16776960, 8388480, 4194240, 2097120, 1048560, 
134213632, 67106816, 33553408, 16776704, 8388352, 4194176, 2097088, 1048544, 
134209536, 67104768, 33552384, 16776192, 8388096, 4194048, 2097024, 1048512, 
134201344, 67100672, 33550336, 16775168, 8387584, 4193792, 2096896, 1048448, 

67108736, 33554368, 16777184, 8388592, 4194296, 2097148, 1048574, 524287, 
67108608, 33554304, 16777152, 8388576, 4194288, 2097144, 1048572, 524286, 
67108352, 33554176, 16777088, 8388544, 4194272, 2097136, 1048568, 524284, 
67107840, 33553920, 16776960, 8388480, 4194240, 2097120, 1048560, 524280, 
67106816, 33553408, 16776704, 8388352, 4194176, 2097088, 1048544, 524272, 
67104768, 33552384, 16776192, 8388096, 4194048, 2097024, 1048512, 524256, 
67100672, 33550336, 16775168, 8387584, 4193792, 2096896, 1048448, 524224, 
67092480, 33546240, 16773120, 8386560, 4193280, 2096640, 1048320, 524160, 

33554304, 16777152, 8388576, 4194288, 2097144, 1048572, 524286, 262143, 
33554176, 16777088, 8388544, 4194272, 2097136, 1048568, 524284, 262142, 
33553920, 16776960, 8388480, 4194240, 2097120, 1048560, 524280, 262140, 
33553408, 16776704, 8388352, 4194176, 2097088, 1048544, 524272, 262136, 
33552384, 16776192, 8388096, 4194048, 2097024, 1048512, 524256, 262128, 
33550336, 16775168, 8387584, 4193792, 2096896, 1048448, 524224, 262112, 
33546240, 16773120, 8386560, 4193280, 2096640, 1048320, 524160, 262080, 
33538048, 16769024, 8384512, 4192256, 2096128, 1048064, 524032, 262016, 

16777088, 8388544, 4194272, 2097136, 1048568, 524284, 262142, 131071, 
16776960, 8388480, 4194240, 2097120, 1048560, 524280, 262140, 131070, 
16776704, 8388352, 4194176, 2097088, 1048544, 524272, 262136, 131068, 
16776192, 8388096, 4194048, 2097024, 1048512, 524256, 262128, 131064, 
16775168, 8387584, 4193792, 2096896, 1048448, 524224, 262112, 131056, 
16773120, 8386560, 4193280, 2096640, 1048320, 524160, 262080, 131040, 
16769024, 8384512, 4192256, 2096128, 1048064, 524032, 262016, 131008, 
16760832, 8380416, 4190208, 2095104, 1047552, 523776, 261888, 130944, 

2147483520, 1073741760, 536870880, 268435440, 134217720, 67108860, 33554430, 16777215, 
2147483392, 1073741696, 536870848, 268435424, 134217712, 67108856, 33554428, 16777214, 
2147483136, 1073741568, 536870784, 268435392, 134217696, 67108848, 33554424, 16777212, 
2147482624, 1073741312, 536870656, 268435328, 134217664, 67108832, 33554416, 16777208, 
2147481600, 1073740800, 536870400, 268435200, 134217600, 67108800, 33554400, 16777200, 
2147479552, 1073739776, 536869888, 268434944, 134217472, 67108736, 33554368, 16777184, 
2147475456, 1073737728, 536868864, 268434432, 134217216, 67108608, 33554304, 16777152, 
2147467264, 1073733632, 536866816, 268433408, 134216704, 67108352, 33554176, 16777088, 
};
